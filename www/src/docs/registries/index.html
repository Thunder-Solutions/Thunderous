<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="Documentation for the Thunderous library." />
		<meta property="og:image" content="/meta.png" />
		<meta name="twitter:image" content="/meta.png" />
		<title>Thunderous | Registries</title>
		<link rel="stylesheet" href="/global.css" />
		<link rel="favicon" href="/favicon.ico" />
	</head>
	<body>
		<th-doc-page>
			<th-page-header>Registries</th-page-header>
			<th-content-group>
				<th-text>
					The <th-code>createRegistry()</th-code> function is used to create a registry for custom elements.
				</th-text>
				<th-code-block lang="ts"><%= include('_code-snippets/registry.ejs') %></th-code-block>
				<th-text>
					This allows you to delegate custom element definitions to the consumer of your library, by using their
					associated classes to look up tag names dynamically. This can be useful when you need to select a custom
					element whose tag name is variable.
				</th-text>
				<th-code-block lang="ts"><%= include('_code-snippets/registry-tag-name.ejs') %></th-code-block>
				<th-text>
					To enable
					<th-link
						href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Scoped-Custom-Element-Registries.md"
						>scoped custom element registries</th-link
					>, you must install and import the polyfill, then pass <th-code>scoped: true</th-code> to the arguments of
					<th-code>createRegistry()</th-code>. This allows you to define custom elements with the same tag name in
					different shadow roots by passing the registry to the <th-code>shadowRootOptions</th-code>.
				</th-text>
				<th-block-quote>
					NOTE: there's a bug in the polyfill that prevents reactive templates from working with scoped registries out
					of the box. This will be fixed in the next release.
				</th-block-quote>
				<th-code-block lang="sh">npm i @webcomponents/scoped-custom-element-registry</th-code-block>
				<th-code-block lang="ts"><%= include('_code-snippets/scoped-registry.ejs') %></th-code-block>
				<th-block-quote>
					NOTE: To access the native <th-code>CustomElementRegistry</th-code> instance, use
					<th-code>registry.eject()</th-code>. If the registry was not scoped, this will return the global
					<th-code>customElements</th-code> object. To check if the registry was scoped, use the boolean
					<th-code>registry.scoped</th-code>.
				</th-block-quote>
			</th-content-group>
		</th-doc-page>
		<script type="module" src="/main.ts"></script>
	</body>
</html>
